# Pickle Go - 回歸測試檢核清單

**文件版本:** 1.0
**建立日期:** 2026-01-21
**適用版本:** v1.0.0 (Public Launch)

---

## 概述

本文件定義了 Pickle Go 平台在每次發布前需要執行的回歸測試項目。確保所有核心功能正常運作，避免迴歸缺陷。

---

## 自動化測試

### 後端測試 (Go API)

```bash
# 進入 API 目錄
cd apps/api

# 執行單元測試
make test

# 執行測試並生成覆蓋率報告
make test-coverage

# 執行程式碼檢查
make lint
```

**預期結果:**
- [ ] 所有單元測試通過
- [ ] 測試覆蓋率 >= 70%
- [ ] 無 lint 錯誤

### 前端測試 (Next.js)

```bash
# 進入 Web 目錄
cd apps/web

# 執行 TypeScript 類型檢查
pnpm typecheck

# 執行 ESLint 檢查
pnpm lint

# 執行 E2E 測試 (需要先啟動服務)
pnpm test:e2e
```

**預期結果:**
- [ ] TypeScript 類型檢查通過
- [ ] 無 ESLint 錯誤
- [ ] 所有 E2E 測試通過

### CI Pipeline

確認 GitHub Actions CI 流程通過:
- [ ] Backend Lint 通過
- [ ] Backend Test 通過
- [ ] Backend Build 通過
- [ ] Frontend Lint 通過
- [ ] Frontend Test 通過
- [ ] Frontend Build 通過

---

## 手動測試檢核清單

### 1. 認證流程

#### 1.1 LINE 登入
- [ ] 點擊「LINE 登入」按鈕能正確跳轉到 LINE 授權頁面
- [ ] LINE 授權後能正確回調並建立/更新用戶
- [ ] 登入後能看到用戶頭像和名稱
- [ ] JWT Token 正確儲存（Cookie）

#### 1.2 登出
- [ ] 點擊登出按鈕能正確清除登入狀態
- [ ] 登出後無法存取需要認證的功能
- [ ] 登出後重新導向至首頁或登入頁

#### 1.3 Session 管理
- [ ] Token 過期後自動重新導向至登入頁
- [ ] 同時開啟多個瀏覽器分頁，登入狀態一致

---

### 2. 團主流程 (建立活動)

#### 2.1 建立活動頁面
- [ ] 未登入時存取建立頁面會提示登入
- [ ] 日期選擇器正常運作，不能選擇過去日期
- [ ] 時間選擇器正常運作
- [ ] 地點搜尋（Google Places）能正確運作
- [ ] 人數選擇 (4-20) 正常
- [ ] 程度選擇正常
- [ ] 費用輸入 (0-9999) 驗證正常
- [ ] 表單驗證錯誤訊息清楚顯示

#### 2.2 建立活動
- [ ] 填寫完整資料後能成功建立活動
- [ ] 建立成功後顯示分享頁面
- [ ] 短網址正確生成
- [ ] 複製連結功能正常

#### 2.3 管理我的活動
- [ ] 能看到自己建立的活動列表
- [ ] 能編輯未開始的活動
- [ ] 能取消活動（有適當確認提示）
- [ ] 能看到報名人員清單

---

### 3. 球友流程 (瀏覽與報名)

#### 3.1 首頁地圖模式
- [ ] 地圖正確載入並顯示台北地區
- [ ] 能成功取得瀏覽器地理位置
- [ ] 附近活動以 Pin 形式顯示在地圖上
- [ ] Pin 顏色依據狀態正確顯示（綠色/橘色/紅色）
- [ ] 點擊 Pin 顯示活動摘要卡片
- [ ] 篩選器（程度）正常運作
- [ ] 地圖縮放和移動流暢

#### 3.2 活動詳情頁
- [ ] 能正確顯示活動所有資訊
- [ ] 主辦人資訊正確顯示
- [ ] 報名狀態（x/y 人）正確
- [ ] 地點地圖小圖正確顯示
- [ ] OG Tags 正確設置（使用開發者工具檢查）

#### 3.3 報名功能
- [ ] 未登入點擊報名會提示登入
- [ ] 登入後能成功報名
- [ ] 報名成功有明確的回饋訊息
- [ ] 已報名的活動顯示「已報名」狀態
- [ ] 能取消報名（有適當確認提示）

#### 3.4 候補機制
- [ ] 活動滿員時報名會進入候補
- [ ] 候補成功顯示候補位置
- [ ] 正取取消後候補自動遞補（需要檢查通知）

#### 3.5 分享功能
- [ ] 短網址能正確開啟活動頁面
- [ ] 分享到 LINE 預覽卡片正確顯示

---

### 4. 行動裝置體驗

在實際手機或模擬器上測試以下項目：

#### 4.1 基本功能
- [ ] 頁面在手機上正確顯示（無水平捲軸）
- [ ] 觸控操作順暢
- [ ] 底部導航列正確顯示
- [ ] 地圖可用手指縮放和移動

#### 4.2 iOS Safari (iPhone 12+)
- [ ] LINE 登入流程正常
- [ ] 建立活動流程正常
- [ ] 報名流程正常

#### 4.3 Android Chrome (Pixel 5+)
- [ ] LINE 登入流程正常
- [ ] 建立活動流程正常
- [ ] 報名流程正常

---

### 5. 效能測試

使用 Lighthouse 或 PageSpeed Insights 測試：

#### 5.1 首頁
- [ ] Performance Score >= 80
- [ ] LCP (Largest Contentful Paint) < 2.5s
- [ ] FID (First Input Delay) < 100ms
- [ ] CLS (Cumulative Layout Shift) < 0.1

#### 5.2 活動詳情頁
- [ ] Performance Score >= 80
- [ ] 頁面載入時間 < 3s

---

### 6. 安全性檢查

- [ ] API 端點正確驗證 JWT Token
- [ ] 未授權請求返回 401
- [ ] CORS 設定只允許指定來源
- [ ] 敏感資料不會暴露在前端 console
- [ ] 環境變數未洩露在前端程式碼中

---

### 7. 錯誤處理

- [ ] API 錯誤有友善的錯誤訊息
- [ ] 網路斷線時有適當提示
- [ ] 404 頁面正確顯示
- [ ] 500 錯誤有錯誤追蹤（Sentry）

---

## 測試環境

| 環境 | URL | 備註 |
|------|-----|------|
| 本地開發 | http://localhost:3000 | API: http://localhost:8080 |
| Staging | https://staging.picklego.tw | 測試用 |
| Production | https://picklego.tw | 正式環境 |

---

## 測試帳號

| 角色 | 說明 | 備註 |
|------|------|------|
| 測試團主 | 用於建立測試活動 | 使用個人 LINE 帳號 |
| 測試球友 | 用於報名測試 | 使用個人 LINE 帳號 |

---

## Bug 嚴重度定義

| 等級 | 定義 | 處理時限 |
|------|------|----------|
| P0 (Critical) | 系統無法使用，核心功能完全失效 | 立即修復 |
| P1 (High) | 重要功能受影響，有 workaround | 24 小時內 |
| P2 (Medium) | 次要功能問題，不影響主流程 | 下個版本 |
| P3 (Low) | 介面小問題、文字錯誤 | 優先度最低 |

---

## 簽核紀錄

| 版本 | 測試日期 | 測試人員 | 結果 | 備註 |
|------|----------|----------|------|------|
| v1.0.0 | YYYY-MM-DD | | [ ] 通過 / [ ] 不通過 | |

---

*本文件隨產品功能迭代更新，最後更新日期請參考 git 提交紀錄。*
